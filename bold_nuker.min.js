function startMetafieldNuker(){BOLD.metafieldNuker.startTime=Date.now(),BOLD.metafieldNuker.targetNamespace=document.querySelector("#namespace").value,BOLD.metafieldNuker.loggingEnabled=document.querySelector("#logging").value,getProductCount()}function getProductCount(){BOLD.metafieldNuker.productCount=0,BOLD.metafieldNuker.variantCount=0;var e=new XMLHttpRequest;e.open("GET",location.origin+"/admin/products/count.json"),e.send(),e.onreadystatechange=function(t){if(2==e.readyState)console.log("Sending Request in progress");else if(3==e.readyState){if(200!=e.status)throw"Oops! Something happened getting the product count... Error: "+e.response;BOLD.metafieldNuker.productCount=JSON.parse(e.response).count,console.log(BOLD.metafieldNuker.productCount),console.log("Found "+BOLD.metafieldNuker.productCount+" products on "+location.origin),BOLD.metafieldNuker.totalPages=1,BOLD.metafieldNuker.productCount>250&&(BOLD.metafieldNuker.totalPages=Math.ceil(BOLD.metafieldNuker.productCount/250)),BOLD.metafieldNuker.productList=[],BOLD.metafieldNuker.pageIndex=1,getProductsByPage(BOLD.metafieldNuker.pageIndex)}}}function getProductsByPage(){if(console.log(BOLD.metafieldNuker.productList),BOLD.metafieldNuker.pageIndex<=BOLD.metafieldNuker.totalPages){BOLD.metafieldNuker.totalPages>1?console.log("Grabbing products in blocks of 250 at a time - Page "+BOLD.metafieldNuker.pageIndex+"..."):console.log("Grabbing products...");var e=new XMLHttpRequest;e.open("GET",location.origin+"/admin/products.json?fields=id,variants&limit=250&page="+BOLD.metafieldNuker.pageIndex),e.setRequestHeader("data-type","json"),e.send(),e.onreadystatechange=function(){if(2==e.readyState)console.log("Sending Request in progress");else if(3==e.readyState){if(200!=e.status)throw"Oops! Something happened getting the product list... Error: "+e.response;for(var t=JSON.parse(e.response),n=0;n<t.products.length;n++){console.log("i "+n);for(var o=[],r=0;r<t.products[n].variants.length;r++)console.log("o "+r),o.push({id:t.products[n].variants[r].id}),BOLD.metafieldNuker.variantCount++;BOLD.metafieldNuker.productList.push({id:t.products[n].id,variants:o})}BOLD.metafieldNuker.pageIndex++,getProductsByPage(BOLD.metafieldNuker.pageIndex)}}}else checkProducts(BOLD.metafieldNuker.productList,0,null,0)}function checkProducts(e,t,n,o){}function deleteMetafield(e,t,n){}function houseKeeping(){finishTime=Date.now();var e=(BOLD.metafieldNuker.finishTime-BOLD.metafieldNuker.startTime)/1e3;console.log("Finished checking "+BOLD.metafieldNuker.variantCount+" variants."),console.log("Job took "+e.toString().toElapsedTime()+" to complete.")}document.querySelector("html").classList.add("nukerJSoverride"),document.querySelector("body").innerHTML+='<div id="nukerJSbar" class="fadein"></div>',document.querySelector("#nukerJSbar").innerHTML+='<div class="wrapper clearfix"></div>',document.querySelector("#nukerJSbar .wrapper").innerHTML+='<ul id="nukerJSnav"></ul>',document.querySelector("#nukerJSnav").innerHTML+='<li><a id="bn_about">About Nuker</a></li>',document.querySelector("#nukerJSnav").innerHTML+='<li class="hidden"></li>',document.querySelector("#nukerJSnav").innerHTML+='<li><select id="ns-selector"></select></li>',document.querySelector("#ns-selector").innerHTML+='<option value="bold_measurement">Buy the Measurement</option>',document.querySelector("#ns-selector").innerHTML+='<option value="shappify_csp">Customer Pricing</option>',document.querySelector("#ns-selector").innerHTML+='<option value="shappify_bundle">Product Bundles</option>',document.querySelector("#ns-selector").innerHTML+='<option value="inventory">Product Discount</option>',document.querySelector("#ns-selector").innerHTML+='<option value="shappify_qb">Quantity Breaks</option>',document.querySelector("#nukerJSnav").innerHTML+='<li><a id="bn_nuke">Nuke Metafields</a></li>',document.querySelector("#nukerJSnav").innerHTML+='<li><a id="bn_settings">Settings</a></li>',document.querySelector("#nukerJSnav").innerHTML+="<li></li>",document.querySelector("#nukerJSbar .wrapper").innerHTML+='<input type="hidden" id="namespace" value="bold_measurement">',document.querySelector("#nukerJSbar .wrapper").innerHTML+='<input type="hidden" id="logging" value="true">',document.querySelector("#ns-selector").addEventListener("change",function(){document.querySelector("#namespace").value=document.querySelector("#ns-selector").value}),document.querySelector("#bn_nuke").addEventListener("click",function(){startMetafieldNuker()}),String.prototype.toElapsedTime=function(){var e=parseInt(this,10),t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=e-3600*t-60*n,r=t+" hours, "+n+" minutes, "+o+" seconds";return r};var BOLD=BOLD||{};BOLD.metafieldNuker={startTime:null,finishTime:null,productCount:null,variantCount:null,targetNamespace:null,loggingEnabled:null,totalPages:null,productList:null,pageIndex:null};